<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Darna - Authentic Moroccan Sweets</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Clicker+Script&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=favorite" />
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <style>
        :root {
           --brand-gold: #9C7945;
           --brand-cream: #FFF5EE;
           --brand-dark-brown: #8B4513;
           --brand-crimson: crimson;
           --brand-dark-bg: #343a40;
           --brand-light-text: #f8f9fa;
           --navbar-height: 70px;
        }
        html { scroll-behavior: smooth; }
        body {
            background-color: var(--brand-cream);
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            padding-top: var(--navbar-height); /* Padding for fixed navbar */
            font-size: 16px;
        }

        /* Landing Section */
        #landing { position: relative; height: calc(100vh - var(--navbar-height)); overflow: hidden; margin-top: calc(-1 * var(--navbar-height)); }
        #landing .carousel, #landing .carousel-inner, #landing .carousel-item { height: 100%; }
        #landing .carousel-item img { object-fit: cover; height: 100%; width: 100%; background-color: #555; }
        .landing-overlay-content { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; background: rgba(0, 0, 0, 0.35); color: var(--brand-cream); display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 1rem; }
        .landing-overlay-content .display-3 { font-family: 'Clicker Script', cursive; font-weight: bold; color: var(--brand-gold); margin-bottom: 1rem; font-size: 3.5rem; text-shadow: 1px 1px 3px rgba(0,0,0,0.4); }
        .landing-overlay-content p { font-size: 1.1rem; color: var(--brand-cream); max-width: 600px; margin-bottom: 1.2rem; font-weight: 400; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
        .landing-overlay-content .material-symbols-outlined { color: var(--brand-crimson); font-variation-settings: 'FILL' 1, 'wght' 700; vertical-align: middle; font-size: 1.4em; margin: 0 0.2em; }
        .animated-text { opacity: 0; transform: translateY(25px); animation: fadeInUp 1.5s ease forwards; }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        .animate-btn { background: linear-gradient(90deg, #C8A75C, var(--brand-gold)); color: var(--brand-cream); font-weight: bold; font-size: 1.1rem; padding: 12px 30px; border-radius: 50px; border: none; text-shadow: 0 0 8px rgba(200, 167, 92, 0.7); transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease; text-decoration: none; display: inline-block; margin-top: 1rem; letter-spacing: 0.5px; }
        .animate-btn:hover { transform: scale(1.05); box-shadow: 0 0 18px rgba(200, 167, 92, 0.9); background: linear-gradient(45deg, var(--brand-gold), #C8A75C); color: var(--brand-cream); }

        /* Navbar */
        .navbar { z-index: 1030; transition: background-color 0.4s ease; padding: 0.6rem 1rem; background-color: rgba(0, 0, 0, 0.4) !important; min-height: var(--navbar-height); }
        .navbar-scrolled { background-color: var(--brand-dark-bg) !important; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .navbar .navbar-brand img { max-width: 130px; height: auto; } /* Increased from 110px for slightly larger logo */
        .navbar .nav-link { color: var(--brand-light-text) !important; font-weight: 500; margin: 0 0.5rem; transition: color 0.3s ease; text-transform: uppercase; font-size: 0.9em; letter-spacing: 0.5px; }
        .navbar .nav-link:hover, .navbar .nav-link.active { color: var(--brand-gold) !important; }
        .navbar-toggler { border-color: rgba(255, 255, 255, 0.3); padding: 0.25rem 0.5rem; }
        .navbar-toggler-icon { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28248, 249, 250, 0.8%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e"); width: 1.2em; height: 1.2em; }
        @media (max-width: 991.98px) { .navbar-collapse { background-color: rgba(var(--bs-dark-rgb), 0.98); border-radius: 0 0 8px 8px; padding: 0.5rem 0; border-top: 1px solid rgba(255, 255, 255, 0.1); } .navbar-nav { text-align: center; width: 100%;} .navbar-nav .nav-item { border-bottom: 1px solid rgba(255,255,255,0.1); width: 100%; } .navbar-nav .nav-item:last-child { border-bottom: none; } .navbar-nav .nav-link { display: block; width: 100%; padding: 0.8rem 1.5rem; } }
        #landing .carousel-control-prev-icon, #landing .carousel-control-next-icon { background-color: rgba(0, 0, 0, 0.3); border-radius: 50%; padding: 1rem; background-size: 40%; }
         /* Navbar Brand Fallback Text */
        .navbar-brand-text-fallback {
            color: var(--brand-gold);
            font-family: 'Clicker Script', cursive;
            font-size: 2em; /* Adjust as needed */
            font-weight: bold;
            display: inline-block;
            line-height: 1;
            padding: 5px 0;
        }

        /* Content Sections */
        #offers, #sweets, #initiatives, #contact { padding-top: 3.5rem; padding-bottom: 3.5rem; }
        #offers h2, #sweets h2, #initiatives h2, #contact h2 { color: var(--brand-dark-brown); font-weight: bold; margin-bottom: 2.5rem !important; font-family: 'Clicker Script', cursive; font-size: 2.8rem; }

        /* Offer & Sweet Cards */
        .offer-card, .sweet-card {
            cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; border: none;
            background-color: #fff; border-radius: 8px; overflow: hidden; height: 100%;
        }
        .offer-card:hover, .sweet-card:hover { transform: translateY(-6px); box-shadow: 0 10px 20px rgba(0,0,0,0.12); }
        .offer-card img, .sweet-card img { height: 180px; object-fit: cover; width: 100%; background-color: #eee; }
        .offer-card .card-body, .sweet-card .card-body { text-align: center; padding: 1rem; display: flex; flex-direction: column; }
        .offer-card .card-title, .sweet-card .card-title { color: var(--brand-dark-brown); font-weight: bold; margin-bottom: 0.4rem; font-size: 1.1rem; }
        .offer-card .card-text, .sweet-card .card-text { color: #555; margin-bottom: 0.6rem; font-size: 0.85em; flex-grow: 1; }
        .offer-card .card-text.fw-bold { color: var(--brand-dark-brown); font-size: 1em; margin-bottom: 1rem; flex-grow: 0; }
        .offer-card .btn.order-btn {
            background-color: var(--brand-dark-brown); color: var(--brand-cream); border: none;
            border-radius: 20px; padding: 7px 22px; transition: background-color 0.3s ease, transform 0.2s ease;
            font-weight: 500; width: 90%; margin-left: auto; margin-right: auto; margin-top: auto;
            font-size: 0.9em; text-decoration: none; display: inline-block; cursor: pointer;
            pointer-events: none;
        }
         .offer-card:hover .btn.order-btn {
             background-color: var(--brand-gold); color: var(--brand-cream); transform: scale(1.03);
        }
         .sweet-card .card-body { min-height: 150px; }
         .sweet-card .text-muted { font-size: 0.8em; }

        #sweets-list .loading-text, #sweets-list .error-text { color: #6c757d; font-style: italic; font-size: 1em; text-align: center; width: 100%; padding: 1.5rem 0; }
        #sweets-list .error-text { color: var(--brand-crimson); font-weight: bold; }


        /* Modal Styling */
        #productDetailModal { --bs-modal-zindex: 1055; }
        @keyframes modalFadeSlideUp { from { opacity: 0; transform: translateY(25px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }
        #productDetailModal.show .modal-dialog { animation: modalFadeSlideUp 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards; }
        @keyframes fadeInUpDelayed { from { opacity: 0; transform: translateY(18px); } to { opacity: 1; transform: translateY(0); } }
        .modal-animate-item { opacity: 0; animation-fill-mode: forwards; }
        .modal-animate-item.animate-in { animation-name: fadeInUpDelayed; animation-duration: 0.55s; animation-timing-function: ease-out; }
        #productDetailModal .modal-dialog { max-width: 700px; }
        @media (max-width: 991.98px) { #productDetailModal .modal-dialog { max-width: 650px; } }
        @media (max-width: 575.98px) { #productDetailModal .modal-dialog { max-width: 96%; margin: 0.5rem auto; } }
        #productDetailModal .modal-content { border: none; border-radius: 16px; box-shadow: 0 12px 35px rgba(0,0,0,0.2); background-color: var(--brand-cream); overflow: hidden; }
        #productDetailModal .modal-header { background-color: var(--brand-dark-brown); color: var(--brand-cream); border-bottom: none; padding: 1rem 1.5rem; border-radius: 15px 15px 0 0; }
        #productDetailModal #modalSweetName { color: var(--brand-gold); font-family: 'Clicker Script', cursive; font-size: 2.4rem; margin-bottom: 0; font-weight: 600; }
        #productDetailModal .btn-close { background: none; border: none; font-size: 1.1rem; opacity: 0.8; transition: opacity 0.2s ease, transform 0.2s ease; filter: brightness(0) invert(1) opacity(0.8); padding: 0.5rem; }
        #productDetailModal .btn-close:hover { opacity: 1; transform: scale(1.1); filter: brightness(0) invert(1) opacity(1);}
        #productDetailModal .modal-body { background-color: var(--brand-cream); padding: 2rem; }
        #productDetailModal .carousel-item img { max-height: 380px; width: 100%; object-fit: contain; background-color: #ffffff; border-radius: 10px; border: 1px solid #eee; }
        #productDetailModal #modalSweetDescription { font-size: 1em; color: #222; margin-top: 0; line-height: 1.7; margin-bottom: 0.5rem; }
        #productDetailModal #modalSweetVariations {
            font-size: 0.9em; color: #444; line-height: 1.5; border-top: 1px solid #eee; padding-top: 1rem; margin-top: 1rem;
        }
        #productDetailModal #modalSweetVariations p { margin-bottom: 0.3rem; }
        #productDetailModal #modalSweetVariations ul { padding-left: 0.5rem; margin-bottom: 0.5rem; list-style-type: none; } /* Removed default bullets */
        #productDetailModal #modalSweetVariations li { margin-bottom: 0.2rem; }
        #productDetailModal #modalSweetVariations i { font-size: 0.8em; vertical-align: baseline; margin-right: 0.3em; } /* Added margin for icon */

        #modalImageCarousel { box-shadow: 0 5px 15px rgba(0,0,0,0.1); border-radius: 10px; overflow:hidden; }
        #modalImageCarousel .carousel-control-prev, #modalImageCarousel .carousel-control-next { opacity: 0.7; transition: opacity 0.3s ease; }
        #modalImageCarousel:hover .carousel-control-prev, #modalImageCarousel:hover .carousel-control-next { opacity: 1; }
        #modalImageCarousel .carousel-control-prev-icon, #modalImageCarousel .carousel-control-next-icon { background-color: rgba(0, 0, 0, 0.5); border-radius: 50%; height: 3rem; width: 3rem; background-size: 50%; }
        #modalImageCarousel .carousel-indicators [data-bs-target] { background-color: rgba(0, 0, 0, 0.3); height: 10px; width: 10px; border-radius: 50%; margin: 0 5px; border: none; transition: background-color 0.3s ease, transform 0.3s ease; }
        #modalImageCarousel .carousel-indicators .active { background-color: var(--brand-gold); transform: scale(1.2); }
        #modalActionButtons { margin-top: 1.5rem; }
        #modalActionButtons .btn { width: 100%; max-width: 300px; padding: 0.7rem 1rem; font-size: 1em; margin-top: 0.5rem; border-radius: 50px; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.1); text-decoration: none; display: inline-block;}
        #modalActionButtons .btn:hover { box-shadow: 0 6px 15px rgba(0,0,0,0.15); transform: translateY(-2px); }
        #modalActionButtons .btn i { margin-right: 0.5rem; }
        #modalActionButtons .btn-whatsapp { background-color: #25D366; color: white; border-color: #25D366; }
        #modalActionButtons .btn-whatsapp:hover { background-color: #1DAE54; border-color: #1DAE54; color: white; }
        #modalActionButtons .btn-offer { background: linear-gradient(90deg, var(--brand-gold), var(--brand-dark-brown)); color: var(--brand-cream); border: none; }
        #modalActionButtons .btn-offer:hover { background: linear-gradient(90deg, var(--brand-dark-brown), var(--brand-gold)); }


        #initiatives { background-color: #fdfaf6; border-top: 1px solid #eee; border-bottom: 1px solid #eee; }
        #initiatives p { color: #444; line-height: 1.8; max-width: 700px; margin-left: auto; margin-right: auto; font-size: 0.95em; }
        #contact p { font-size: 1em; color: #333; margin-bottom: 0.8rem; }
        #contact a { color: var(--brand-dark-brown); text-decoration: none; font-weight: 500; }
        #contact a:hover { color: var(--brand-gold); text-decoration: underline; }
        #contact .social-icons { margin-top: 1.5rem; }
        #contact .social-icons a { color: var(--brand-dark-brown); font-size: 1.6rem; margin: 0 0.6rem; text-decoration: none; transition: color 0.3s ease, transform 0.2s ease; display: inline-block; }
        #contact .social-icons a:hover { color: var(--brand-gold); transform: scale(1.1); }

        .footer { background-color: var(--brand-dark-bg); color: rgba(255, 255, 255, 0.7); padding: 1.2rem 0; }
        .footer p { margin: 0; font-size: 0.85em; }
        .footer .social-icons { margin-bottom: 0.8rem !important; }
        .footer .social-icons a { color: rgba(255, 255, 255, 0.7); font-size: 1.4rem; margin: 0 0.6rem; text-decoration: none; transition: color 0.3s ease, transform 0.2s ease; display: inline-block; }
        .footer .social-icons a:hover { color: var(--brand-gold); transform: scale(1.1); }
         .footer .contact-info a { /* Specific styling for contact email in footer */
            color: rgba(255, 255, 255, 0.7);
            font-weight: normal; /* Ensure it's not bold like other 'a' tags in contact */
        }
        .footer .contact-info a:hover {
            color: var(--brand-gold);
        }
         .footer .contact-info { margin-bottom: 0.5rem; } /* Space between contact and copyright */


        @media (min-width: 768px) {
            body { font-size: 16px; }
            #landing { height: calc(100vh - var(--navbar-height)); margin-top: calc(-1 * var(--navbar-height));}
            .landing-overlay-content .display-3 { font-size: 5rem; }
            .landing-overlay-content p { font-size: 1.2rem; }
            .animate-btn { font-size: 1.3rem; padding: 14px 35px; }
            #offers, #sweets, #initiatives, #contact { padding-top: 5rem; padding-bottom: 5rem; }
            #offers h2, #sweets h2, #initiatives h2, #contact h2 { font-size: 3.2rem; margin-bottom: 3.5rem !important; }
            .offer-card img, .sweet-card img { height: 220px; }
            .offer-card .card-body, .sweet-card .card-body { padding: 1.5rem; }
            .offer-card .card-title, .sweet-card .card-title { font-size: 1.25rem; }
            .offer-card .card-text, .sweet-card .card-text { font-size: 0.9em; }
             .sweet-card .card-body { min-height: 170px; }
            .offer-card .btn.order-btn { padding: 9px 28px; font-size: 1em;}
            #productDetailModal .modal-dialog { max-width: 750px; }
            #productDetailModal .carousel-item img { max-height: 450px; }
            #productDetailModal #modalSweetName { font-size: 2.5rem; }
            #productDetailModal #modalSweetDescription { font-size: 1em; }
            #productDetailModal #modalSweetVariations { font-size: 0.95em; }
            #contact .social-icons a { font-size: 1.8rem; }
            .footer { padding: 1.5rem 0; }
            .footer p { font-size: 0.9em; }
            .footer .social-icons a { font-size: 1.6rem; }
            /* .navbar .navbar-brand img already adjusted */
        }

    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark fixed-top w-100">
         <div class="container">
            <a class="navbar-brand" href="#landing">
                <img src="img/logo-no-background.png" alt="Darna Logo"
                     onerror="this.style.display='none'; const el = document.createElement('span'); el.className='navbar-brand-text-fallback'; el.textContent='Darna'; this.parentNode.insertBefore(el, this.nextSibling); console.error('Logo Error: img/logo-no-background.png')">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link active" href="#landing">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="custom-order.html">Offerings</a></li>
                    <li class="nav-item"><a class="nav-link" href="#initiatives">Initiatives</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">Contact Us</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <section id="landing">
        <div id="sweetSlideshow" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active"><img src="img/1.jpg" class="d-block w-100" alt="Chebakia" onerror="this.onerror=null; this.src='img/placeholder-sweet.png';"></div>
                <div class="carousel-item"><img src="img/gettyimages-2156187804-612x612.jpg" class="d-block w-100" alt="Kaab el Ghzal" onerror="this.onerror=null; this.src='img/placeholder-sweet.png';"></div>
                <div class="carousel-item"><img src="img/gettyimages-689087120-612x612.jpg" class="d-block w-100" alt="Briouat" onerror="this.onerror=null; this.src='img/placeholder-sweet.png';"></div>
                <div class="carousel-item"><img src="img/7.jpg" class="d-block w-100" alt="Fekkas" onerror="this.onerror=null; this.src='img/placeholder-sweet.png';"></div>
                <div class="carousel-item"><img src="img/gettyimages-1177725658-612x612.jpg" class="d-block w-100" alt="M'hencha" onerror="this.onerror=null; this.src='img/placeholder-sweet.png';"></div>
                <div class="carousel-item"><img src="img/4.jpg" class="d-block w-100" alt="Ghriba Bahla" onerror="this.onerror=null; this.src='img/placeholder-sweet.png';"></div>
                 <div class="carousel-item"><img src="img/gettyimages-1346580295-612x612.jpg" class="d-block w-100" alt="Assorted Sweets" onerror="this.onerror=null; this.src='img/placeholder-sweet.png';"></div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#sweetSlideshow" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span><span class="visually-hidden">Prev</span></button>
            <button class="carousel-control-next" type="button" data-bs-target="#sweetSlideshow" data-bs-slide="next"><span class="carousel-control-next-icon"></span><span class="visually-hidden">Next</span></button>
        </div>
        <div class="landing-overlay-content">
            <h1 class="display-3 animated-text">Discover the Finest Moroccan Sweets</h1>
            <p class="animated-text">Crafted with <span class="material-symbols-outlined">favorite</span> and tradition, indulge in the authentic taste of Morocco.</p>
            <a href="#offers" class="animate-btn animated-text" style="animation-delay: 0.8s;">Explore Our Offers</a>
        </div>
    </section>

    <section id="offers" class="container my-5">
        <h2 class="text-center">Special Offers</h2>
        <div class="row justify-content-center g-4">
            <div class="col-lg-4 col-md-6 mb-4 d-flex align-items-stretch clickable-card" data-sweet-id="sw005" data-card-type="offer">
                <div class="card offer-card shadow w-100">
                    <img src="img/5.jpg" class="card-img-top" alt="Sweet Starter Box" onerror="this.onerror=null; this.src='img/placeholder-sweet.png';">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Sweet Starter Box</h5>
                        <p class="card-text">A delightful mix of 10 traditional pieces.</p>
                        <p class="card-text fw-bold">$15</p>
                        <a href="#" class="btn order-btn mt-auto" aria-hidden="true" tabindex="-1">Order via WhatsApp</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4 d-flex align-items-stretch clickable-card" data-sweet-id="sw001" data-card-type="offer"> <!-- Using sw001 (Chebakia) as representative image source -->
                <div class="card offer-card shadow w-100">
                    <img src="img/1.jpg" class="card-img-top" alt="Family Delight Box" onerror="this.onerror=null; this.src='img/placeholder-sweet.png';">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Family Delight Box</h5>
                        <p class="card-text">Generous assortment of 25 favourite pieces.</p>
                        <p class="card-text fw-bold">$35</p>
                        <a href="#" class="btn order-btn mt-auto" aria-hidden="true" tabindex="-1">Order via WhatsApp</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4 d-flex align-items-stretch clickable-card" data-sweet-id="sw008" data-card-type="offer"> <!-- Using sw008 (M'hencha) as representative image source -->
                <div class="card offer-card shadow w-100">
                    <img src="img/8.jpg" class="card-img-top" alt="Celebration Pack" onerror="this.onerror=null; this.src='img/placeholder-sweet.png';">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Celebration Pack</h5>
                        <p class="card-text">Perfect for events: 50 pieces (Free Delivery!).</p>
                        <p class="card-text fw-bold">$60</p>
                         <a href="#" class="btn order-btn mt-auto" aria-hidden="true" tabindex="-1">Order via WhatsApp</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="sweets" class="container my-5">
        <h2 class="text-center">Our Sweets Selection</h2>
        <div class="row g-3 g-sm-4" id="sweets-list">
            <div class="col-12 loading-text">
                 <p>Loading...</p>
                 <div class="spinner-border text-secondary"><span class="visually-hidden">.</span></div>
            </div>
        </div>
        <div class="text-center mt-5">
             <a href="custom-order.html" class="btn btn-lg btn-outline-secondary animate-btn" style="background: var(--brand-dark-brown); color: var(--brand-cream); border-color: var(--brand-dark-brown);">View All & Build Your Custom Box</a>
        </div>
    </section>

     <section id="initiatives" class="container-fluid py-5 bg-light">
         <div class="container">
            <h2 class="text-center">Our Commitment</h2>
            <div class="row">
                <div class="col-lg-8 col-md-10 mx-auto text-center">
                    <p>At Darna, we pour passion into every sweet. We use the finest, locally-sourced ingredients, upholding traditional recipes passed down through generations.</p>
                    <p>We believe in sharing authentic Moroccan culture and support our community by partnering with local artisans and contributing to initiatives that empower women.</p>
                </div>
            </div>
         </div>
     </section>

    <section id="contact" class="container text-center my-5">
        <h2>Get In Touch</h2>
        <p>Questions, special requests, or catering inquiries?</p>
        <p>Email: <a href="mailto:darnapatisserie@gmail.com">darnapatisserie@gmail.com</a></p>
        <p>Or message us via WhatsApp using the button in the product details!</p>
        <div class="social-icons">
            <p class="mb-2">Follow us:</p>
            <a href="https://www.instagram.com/darna_patisserie?igsh=MTRwcTNtcWkyM3Q4OA==" target="_blank" rel="noopener noreferrer" aria-label="Instagram"> <i class="bi bi-instagram"></i> </a>
            <a href="https://www.facebook.com/profile.php?id=61575057266959" target="_blank" rel="noopener noreferrer" aria-label="Facebook"> <i class="bi bi-facebook"></i> </a>
        </div>
    </section>

    <footer class="footer text-center py-3">
        <div class="container">
            <div class="social-icons mb-3">
                <a href="https://www.instagram.com/darna_patisserie?igsh=MTRwcTNtcWkyM3Q4OA==" target="_blank" rel="noopener noreferrer" aria-label="Instagram"> <i class="bi bi-instagram"></i> </a>
                <a href="https://www.facebook.com/profile.php?id=61575057266959" target="_blank" rel="noopener noreferrer" aria-label="Facebook"> <i class="bi bi-facebook"></i> </a>
            </div>
             <div class="contact-info mb-2"> <!-- Added contact info here as well for consistency -->
                 <a href="mailto:darnapatisserie@gmail.com"><i class="bi bi-envelope-fill me-1"></i> darnapatisserie@gmail.com</a>
            </div>
            <p>Â© <span id="currentYear"></span> Darna Patisserie. All Rights Reserved.</p>
        </div>
    </footer>

    <div class="modal fade" id="productDetailModal" tabindex="-1" aria-labelledby="productDetailModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title modal-animate-item" id="modalSweetName">Sweet Name</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row">
                <div class="col-md-7 modal-animate-item modal-carousel-col">
                     <div id="modalImageCarousel" class="carousel slide mb-3 mb-md-0" data-bs-ride="false">
                        <div class="carousel-indicators" id="modalCarouselIndicators"></div>
                        <div class="carousel-inner bg-light rounded" id="modalCarouselInner">
                            <div class="carousel-item active">
                                <div class="d-flex justify-content-center align-items-center h-100" style="min-height: 300px;">
                                    <div class="spinner-border text-secondary"><span class="visually-hidden">Loading images...</span></div>
                                </div>
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#modalImageCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span><span class="visually-hidden">Prev</span></button>
                        <button class="carousel-control-next" type="button" data-bs-target="#modalImageCarousel" data-bs-slide="next"><span class="carousel-control-next-icon"></span><span class="visually-hidden">Next</span></button>
                    </div>
                </div>
                <div class="col-md-5 modal-animate-item modal-details-col d-flex flex-column">
                    <div class="flex-grow-1">
                        <p id="modalSweetDescription" class="modal-description">Description loading...</p>
                        <div id="modalSweetVariations" class="modal-variations" style="display: none;">
                        </div>
                    </div>
                    <div id="modalActionButtons" class="mt-3 text-center">
                         <p class="small text-muted">Loading action...</p>
                    </div>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let sweetsData = [];
        const placeholderImg = 'img/placeholder-sweet.png';
        const WHATSAPP_NUMBER = "212708898226";

         const offerDetailsMap = {
            'sw005': {
                name: 'Sweet Starter Box',
                description: 'A delightful mix of 10 traditional pieces.',
                price: '$15',
                typicalIncludes: [
                    "Examples include:", "Chebakia", "Ghriba Bahla", "Kaab el Ghzal (small)", "Briouat (Almond)"
                ]
            },
            'sw001': {
                name: 'Family Delight Box',
                description: 'Generous assortment of 25 favourite pieces.',
                price: '$35',
                typicalIncludes: [
                    "A wider variety, typically including:", "Multiple Chebakia", "Multiple Kaab el Ghzal", "Ghriba (various types)", "Briouat (Almond/Peanut)", "Fekkas"
                ]
            },
            'sw008': {
                name: 'Celebration Pack',
                description: 'Perfect for events: 50 pieces (+ Free Delivery!).',
                price: '$60',
                typicalIncludes: [
                    "Our largest variety & quantity:", "Multiple pieces of most sweets like:", "Chebakia, Kaab el Ghzal", "Ghriba (various types)", "Briouat (various fillings)", "Fekkas, M'hencha (slices)", "May include seasonal specials"
                ]
            }
        };

        async function loadSweetsData() {
            if (sweetsData.length > 0) return sweetsData;
            try {
                const response = await fetch('sweets.json');
                if (!response.ok) throw new Error(`HTTP error ${response.status}. Could not fetch sweets.json.`);
                const data = await response.json();
                if (!Array.isArray(data)) throw new Error("Invalid data format in sweets.json. Expected an array.");
                sweetsData = data;
                console.log("Sweets data loaded successfully:", sweetsData.length, "items");
                return sweetsData;
            } catch (error) {
                console.error("Error loading sweets data:", error);
                const container = document.getElementById('sweets-list');
                if (container) {
                     container.innerHTML = `<p class="col-12 error-text">Couldn't load sweets data. Please check console or try refreshing.<br><small>(${error.message})</small></p>`;
                }
                return [];
            }
        }

        function displaySweets(sweets) {
            const container = document.getElementById('sweets-list');
            const loading = container.querySelector('.loading-text');
            if (loading) loading.remove();

            if (!sweets || sweets.length === 0) {
                 if (!container.querySelector('.error-text')) {
                    container.innerHTML = `<p class="col-12 error-text">No sweets to display right now.</p>`;
                 }
                 return;
            }
            container.innerHTML = '';
            sweets.forEach(sweet => {
                if (!sweet || !sweet.id) {
                    console.warn("Skipping invalid sweet data item:", sweet);
                    return;
                }
                const name = sweet.name || 'Unnamed Sweet';
                let desc = sweet.description || 'A delicious Moroccan sweet.';
                if (desc.length > 90) { desc = desc.substring(0, 90) + '...'; }
                const img = sweet.img?.trim() ? sweet.img : placeholderImg;

                const col = document.createElement('div');
                col.className = 'col-12 col-sm-6 col-md-4 col-lg-3 mb-4 d-flex align-items-stretch clickable-card';
                col.dataset.sweetId = sweet.id;
                col.dataset.cardType = 'sweet';

                col.innerHTML = `
                    <div class="card sweet-card w-100 shadow-sm">
                        <img src="${img}" class="card-img-top" alt="${name}" onerror="this.onerror=null; this.src='${placeholderImg}'; this.alt='Image not available';">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">${name}</h5>
                            <p class="card-text">${desc}</p>
                            <small class="text-muted mt-auto text-center pt-2">Click to view details</small>
                        </div>
                    </div>`;
                container.appendChild(col);
            });
        }

        async function showProductModal(sweetId, cardType = 'sweet') {
            console.log(`Showing modal for ID: ${sweetId}, Type: ${cardType}`);
            const allSweets = await loadSweetsData();
            const sweet = allSweets.find(s => s.id === sweetId);

            if (!sweet && cardType === 'sweet') {
                console.error("Sweet data not found for ID:", sweetId);
                alert("Details for this item could not be found.");
                return;
            }
             if (!sweet && cardType === 'offer') {
                console.warn("Representative sweet (ID:", sweetId, ") not found, proceeding with Offer map details.");
            }

            const modalElement = document.getElementById('productDetailModal');
            const modal = bootstrap.Modal.getOrCreateInstance(modalElement);
            const titleEl = document.getElementById('modalSweetName');
            const descEl = document.getElementById('modalSweetDescription');
            const varsEl = document.getElementById('modalSweetVariations');
            const carouselInnerEl = document.getElementById('modalCarouselInner');
            const carouselIndicatorsEl = document.getElementById('modalCarouselIndicators');
            const actionButtonsContainer = document.getElementById('modalActionButtons');
            const modalAnimatedItems = modalElement.querySelectorAll('.modal-animate-item');

            modalAnimatedItems.forEach(el => { el.classList.remove('animate-in'); el.style.animationDelay = ''; });

             let displayName, displayDesc, images = [placeholderImg];
             varsEl.innerHTML = ''; varsEl.style.display = 'none';

             if (cardType === 'offer') {
                 const offerDetails = offerDetailsMap[sweetId];
                 if (offerDetails) {
                     displayName = offerDetails.name;
                     displayDesc = offerDetails.description + (offerDetails.price ? ` (${offerDetails.price})` : '');
                     if (offerDetails.typicalIncludes?.length) {
                         let contentsHTML = '<p class="fw-bold mt-3 mb-1">Typical Box Contents:</p><ul class="list-unstyled small ms-2">';
                         offerDetails.typicalIncludes.forEach(item => {
                             contentsHTML += `<li><i class="bi bi-check-lg text-secondary"></i>${item}</li>`;
                         });
                         contentsHTML += '</ul><p class="small text-muted fst-italic ms-2 mt-2">(Exact mix may vary slightly)</p>';
                         varsEl.innerHTML = contentsHTML;
                         varsEl.style.display = 'block';
                     }
                 } else {
                     displayName = "Offer Details"; displayDesc = "Details for this offer could not be loaded.";
                     console.error("Offer details missing in map for sweetId:", sweetId);
                 }
                 images = (sweet && Array.isArray(sweet.images) && sweet.images.length) ? sweet.images : (sweet?.img ? [sweet.img] : [placeholderImg]);
             } else if (sweet) {
                 displayName = sweet.name || 'Sweet Details';
                 displayDesc = sweet.description || 'No description available.';
                 if (sweet.variations?.length) {
                     varsEl.innerHTML = `<p class="fw-bold mt-3 mb-1">Available Variations:</p><p class="mb-0">${sweet.variations.join(', ')}</p>`;
                     varsEl.style.display = 'block';
                 }
                 images = (Array.isArray(sweet.images) && sweet.images.length) ? sweet.images : (sweet.img ? [sweet.img] : [placeholderImg]);
             } else {
                 displayName = "Error"; displayDesc = "Could not load item details.";
             }

            titleEl.textContent = displayName;
            descEl.textContent = displayDesc;

            carouselInnerEl.innerHTML = ''; carouselIndicatorsEl.innerHTML = '';
            images.forEach((src, i) => {
                const activeClass = i === 0 ? 'active' : '';
                const safeSrc = src?.trim() ? src : placeholderImg;
                carouselInnerEl.insertAdjacentHTML('beforeend', `
                    <div class="carousel-item ${activeClass}">
                        <img src="${safeSrc}" class="d-block w-100" alt="${displayName} image ${i + 1}" onerror="this.onerror=null; this.src='${placeholderImg}'; this.alt='Image failed to load';">
                    </div>`);
                if (images.length > 1) {
                    carouselIndicatorsEl.insertAdjacentHTML('beforeend', `
                        <button type="button" data-bs-target="#modalImageCarousel" data-bs-slide-to="${i}" class="${activeClass}" ${activeClass ? 'aria-current="true"' : ''} aria-label="Slide ${i + 1}"></button>`);
                }
            });
            carouselIndicatorsEl.style.display = images.length > 1 ? '' : 'none';

            const carouselElement = document.getElementById('modalImageCarousel');
            if (carouselElement) {
                let instance = bootstrap.Carousel.getInstance(carouselElement);
                if (instance) { instance.dispose(); }
                new bootstrap.Carousel(carouselElement, { interval: false, ride: false });
            }

            actionButtonsContainer.innerHTML = '';
            const isWhatsAppConfigured = WHATSAPP_NUMBER && WHATSAPP_NUMBER !== "YOUR_PHONE_NUMBER";

            if (cardType === 'offer') {
                const offerDetails = offerDetailsMap[sweetId];
                if (offerDetails && isWhatsAppConfigured) {
                    let message = `Hello Darna! I'm interested in ordering the ${offerDetails.name}`;
                    if (offerDetails.description) message += ` (${offerDetails.description.replace('(Free Delivery!)', '+ Free Delivery')})`;
                    if (offerDetails.price) message += ` - ${offerDetails.price}`;
                    message += ".";
                    const whatsappUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;
                    actionButtonsContainer.innerHTML = `<a href="${whatsappUrl}" target="_blank" rel="noopener noreferrer" class="btn btn-whatsapp"><i class="bi bi-whatsapp"></i> Order Offer via WhatsApp</a>`;
                } else if (!offerDetails) {
                     actionButtonsContainer.innerHTML = `<p class="text-warning small">Offer details missing.</p>`;
                } else {
                    actionButtonsContainer.innerHTML = `<p class="text-danger small">WhatsApp ordering unavailable.</p>`;
                }
            } else {
                 actionButtonsContainer.innerHTML = `
                    <a href="custom-order.html" class="btn btn-offer"><i class="bi bi-box-seam"></i> Add to Custom Box</a>
                     ${isWhatsAppConfigured ? `
                     <a href="https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(`Hello Darna! I have a question about the ${sweet?.name || 'sweet'}.`)}" target="_blank" rel="noopener noreferrer" class="btn btn-whatsapp mt-2">
                         <i class="bi bi-whatsapp"></i> Inquire on WhatsApp
                     </a>` : '<p class="text-muted small mt-2">WhatsApp inquiry unavailable.</p>'}`;
            }

            modalElement.removeEventListener('shown.bs.modal', applyModalAnimations);
            modalElement.addEventListener('shown.bs.modal', applyModalAnimations, { once: true });
            modal.show();
        }

        function applyModalAnimations() {
            const modalElement = document.getElementById('productDetailModal');
            const animatedItems = modalElement.querySelectorAll('.modal-animate-item');
            animatedItems.forEach((el, i) => {
                el.style.animationDelay = `${0.1 + i * 0.1}s`;
                el.classList.add('animate-in');
            });
        }

        document.addEventListener("DOMContentLoaded", async () => {
            const landingCarouselElement = document.getElementById('sweetSlideshow');
            if (landingCarouselElement && typeof bootstrap?.Carousel === 'function') {
                try { new bootstrap.Carousel(landingCarouselElement, { interval: 5000, ride: 'carousel', pause: 'hover' }); }
                catch (e) { console.error("Landing Carousel init error:", e); }
            }

            const sweets = await loadSweetsData();
            displaySweets(sweets);

            const nav = document.querySelector('.navbar.fixed-top');
            if (nav) {
                const handleScroll = () => nav.classList.toggle('navbar-scrolled', window.scrollY > 50);
                window.addEventListener('scroll', handleScroll); handleScroll();
            }

            const yearSpan = document.getElementById('currentYear');
            if (yearSpan) yearSpan.textContent = new Date().getFullYear();

            document.querySelectorAll(".animated-text").forEach((el, i) => el.style.animationDelay = `${0.5 + i * 0.3}s`);

            document.body.addEventListener('click', (event) => {
                const card = event.target.closest('.clickable-card');
                if (card) {
                     const sweetId = card.dataset.sweetId;
                     const cardType = card.dataset.cardType || 'sweet';
                     if (sweetId) showProductModal(sweetId, cardType);
                     else console.warn("Card missing data-sweet-id:", card);
                }
            });

             if (!WHATSAPP_NUMBER || WHATSAPP_NUMBER === "YOUR_PHONE_NUMBER") {
                 console.warn("WARNING: WhatsApp number needs configuration in index.html script.");
             } else { console.log("WhatsApp configured:", WHATSAPP_NUMBER); }
        });
    </script>

</body>
</html>